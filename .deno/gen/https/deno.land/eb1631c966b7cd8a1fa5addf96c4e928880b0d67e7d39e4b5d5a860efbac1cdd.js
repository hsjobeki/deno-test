import { notImplemented } from "../../_utils.ts";
import { isAnyArrayBuffer, isArrayBufferView } from "../util/types.ts";
import { ERR_INVALID_ARG_TYPE } from "../errors.ts";
import { validateInt32, validateString } from "../validators.mjs";
import { Buffer } from "../../buffer.ts";
import { getDefaultEncoding, toBuf } from "./util.ts";
const DH_GENERATOR = 2;
export class DiffieHellman {
    verifyError;
    constructor(sizeOrKey, keyEncoding, generator, genEncoding) {
        if (typeof sizeOrKey !== "number" &&
            typeof sizeOrKey !== "string" &&
            !isArrayBufferView(sizeOrKey) &&
            !isAnyArrayBuffer(sizeOrKey)) {
            throw new ERR_INVALID_ARG_TYPE("sizeOrKey", ["number", "string", "ArrayBuffer", "Buffer", "TypedArray", "DataView"], sizeOrKey);
        }
        if (typeof sizeOrKey === "number") {
            validateInt32(sizeOrKey, "sizeOrKey");
        }
        if (keyEncoding &&
            !Buffer.isEncoding(keyEncoding) &&
            keyEncoding !== "buffer") {
            genEncoding = generator;
            generator = keyEncoding;
            keyEncoding = false;
        }
        const encoding = getDefaultEncoding();
        keyEncoding = keyEncoding || encoding;
        genEncoding = genEncoding || encoding;
        if (typeof sizeOrKey !== "number") {
            sizeOrKey = toBuf(sizeOrKey, keyEncoding);
        }
        if (!generator) {
            generator = DH_GENERATOR;
        }
        else if (typeof generator === "number") {
            validateInt32(generator, "generator");
        }
        else if (typeof generator === "string") {
            generator = toBuf(generator, genEncoding);
        }
        else if (!isArrayBufferView(generator) && !isAnyArrayBuffer(generator)) {
            throw new ERR_INVALID_ARG_TYPE("generator", ["number", "string", "ArrayBuffer", "Buffer", "TypedArray", "DataView"], generator);
        }
        notImplemented("crypto.DiffieHellman");
    }
    computeSecret(_otherPublicKey, _inputEncoding, _outputEncoding) {
        notImplemented("crypto.DiffieHellman.prototype.computeSecret");
    }
    generateKeys(_encoding) {
        notImplemented("crypto.DiffieHellman.prototype.generateKeys");
    }
    getGenerator(_encoding) {
        notImplemented("crypto.DiffieHellman.prototype.getGenerator");
    }
    getPrime(_encoding) {
        notImplemented("crypto.DiffieHellman.prototype.getPrime");
    }
    getPrivateKey(_encoding) {
        notImplemented("crypto.DiffieHellman.prototype.getPrivateKey");
    }
    getPublicKey(_encoding) {
        notImplemented("crypto.DiffieHellman.prototype.getPublicKey");
    }
    setPrivateKey(_privateKey, _encoding) {
        notImplemented("crypto.DiffieHellman.prototype.setPrivateKey");
    }
    setPublicKey(_publicKey, _encoding) {
        notImplemented("crypto.DiffieHellman.prototype.setPublicKey");
    }
}
export class DiffieHellmanGroup {
    verifyError;
    constructor(_name) {
        notImplemented("crypto.DiffieHellmanGroup");
    }
    computeSecret(_otherPublicKey, _inputEncoding, _outputEncoding) {
        notImplemented("crypto.DiffieHellman.prototype.computeSecret");
    }
    generateKeys(_encoding) {
        notImplemented("crypto.DiffieHellman.prototype.generateKeys");
    }
    getGenerator(_encoding) {
        notImplemented("crypto.DiffieHellman.prototype.getGenerator");
    }
    getPrime(_encoding) {
        notImplemented("crypto.DiffieHellman.prototype.getPrime");
    }
    getPrivateKey(_encoding) {
        notImplemented("crypto.DiffieHellman.prototype.getPrivateKey");
    }
    getPublicKey(_encoding) {
        notImplemented("crypto.DiffieHellman.prototype.getPublicKey");
    }
}
export class ECDH {
    constructor(curve) {
        validateString(curve, "curve");
        notImplemented("crypto.ECDH");
    }
    static convertKey(_key, _curve, _inputEncoding, _outputEncoding, _format) {
        notImplemented("crypto.ECDH.prototype.convertKey");
    }
    computeSecret(_otherPublicKey, _inputEncoding, _outputEncoding) {
        notImplemented("crypto.ECDH.prototype.computeSecret");
    }
    generateKeys(_encoding, _format) {
        notImplemented("crypto.ECDH.prototype.generateKeys");
    }
    getPrivateKey(_encoding) {
        notImplemented("crypto.ECDH.prototype.getPrivateKey");
    }
    getPublicKey(_encoding, _format) {
        notImplemented("crypto.ECDH.prototype.getPublicKey");
    }
    setPrivateKey(_privateKey, _encoding) {
        notImplemented("crypto.ECDH.prototype.setPrivateKey");
    }
}
export function diffieHellman(_options) {
    notImplemented("crypto.diffieHellman");
}
export default {
    DiffieHellman,
    DiffieHellmanGroup,
    ECDH,
    diffieHellman,
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlmZmllaGVsbG1hbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImRpZmZpZWhlbGxtYW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0EsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUNwRCxPQUFPLEVBQUUsYUFBYSxFQUFFLGNBQWMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ2xFLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUN6QyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsS0FBSyxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBU3RELE1BQU0sWUFBWSxHQUFHLENBQUMsQ0FBQztBQUV2QixNQUFNLE9BQU8sYUFBYTtJQUN4QixXQUFXLENBQVU7SUFFckIsWUFDRSxTQUFrQixFQUNsQixXQUFxQixFQUNyQixTQUFtQixFQUNuQixXQUFxQjtRQUVyQixJQUNFLE9BQU8sU0FBUyxLQUFLLFFBQVE7WUFDN0IsT0FBTyxTQUFTLEtBQUssUUFBUTtZQUM3QixDQUFDLGlCQUFpQixDQUFDLFNBQVMsQ0FBQztZQUM3QixDQUFDLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxFQUM1QjtZQUNBLE1BQU0sSUFBSSxvQkFBb0IsQ0FDNUIsV0FBVyxFQUNYLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxhQUFhLEVBQUUsUUFBUSxFQUFFLFlBQVksRUFBRSxVQUFVLENBQUMsRUFDdkUsU0FBUyxDQUNWLENBQUM7U0FDSDtRQUVELElBQUksT0FBTyxTQUFTLEtBQUssUUFBUSxFQUFFO1lBQ2pDLGFBQWEsQ0FBQyxTQUFTLEVBQUUsV0FBVyxDQUFDLENBQUM7U0FDdkM7UUFFRCxJQUNFLFdBQVc7WUFDWCxDQUFDLE1BQU0sQ0FBQyxVQUFV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IDIwMTgtMjAyMiB0aGUgRGVubyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLiBNSVQgbGljZW5zZS5cbi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIE5vZGUuanMgY29udHJpYnV0b3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLiBNSVQgbGljZW5zZS5cblxuaW1wb3J0IHsgbm90SW1wbGVtZW50ZWQgfSBmcm9tIFwiLi4vLi4vX3V0aWxzLnRzXCI7XG5pbXBvcnQgeyBpc0FueUFycmF5QnVmZmVyLCBpc0FycmF5QnVmZmVyVmlldyB9IGZyb20gXCIuLi91dGlsL3R5cGVzLnRzXCI7XG5pbXBvcnQgeyBFUlJfSU5WQUxJRF9BUkdfVFlQRSB9IGZyb20gXCIuLi9lcnJvcnMudHNcIjtcbmltcG9ydCB7IHZhbGlkYXRlSW50MzIsIHZhbGlkYXRlU3RyaW5nIH0gZnJvbSBcIi4uL3ZhbGlkYXRvcnMubWpzXCI7XG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tIFwiLi4vLi4vYnVmZmVyLnRzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0RW5jb2RpbmcsIHRvQnVmIH0gZnJvbSBcIi4vdXRpbC50c1wiO1xuaW1wb3J0IHR5cGUge1xuICBCaW5hcnlMaWtlLFxuICBCaW5hcnlUb1RleHRFbmNvZGluZyxcbiAgRUNESEtleUZvcm1hdCxcbn0gZnJvbSBcIi4vdHlwZXMudHNcIjtcbmltcG9ydCB7IEtleU9iamVjdCB9IGZyb20gXCIuL2tleXMudHNcIjtcbmltcG9ydCB0eXBlIHsgQnVmZmVyRW5jb2RpbmcgfSBmcm9tIFwiLi4vLi4vX2dsb2JhbC5kLnRzXCI7XG5cbmNvbnN0IERIX0dFTkVSQVRPUiA9IDI7XG5cbmV4cG9ydCBjbGFzcyBEaWZmaWVIZWxsbWFuIHtcbiAgdmVyaWZ5RXJyb3IhOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgc2l6ZU9yS2V5OiB1bmtub3duLFxuICAgIGtleUVuY29kaW5nPzogdW5rbm93bixcbiAgICBnZW5lcmF0b3I/OiB1bmtub3duLFxuICAgIGdlbkVuY29kaW5nPzogdW5rbm93bixcbiAgKSB7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHNpemVPcktleSAhPT0gXCJudW1iZXJcIiAmJlxuICAgICAgdHlwZW9mIHNpemVPcktleSAhPT0gXCJzdHJpbmdcIiAmJlxuICAgICAgIWlzQXJyYXlCdWZmZXJWaWV3KHNpemVPcktleSkgJiZcbiAgICAgICFpc0FueUFycmF5QnVmZmVyKHNpemVPcktleSlcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFUlJfSU5WQUxJRF9BUkdfVFlQRShcbiAgICAgICAgXCJzaXplT3JLZXlcIixcbiAgICAgICAgW1wibnVtYmVyXCIsIFwic3RyaW5nXCIsIFwiQXJyYXlCdWZmZXJcIiwgXCJCdWZmZXJcIiwgXCJUeXBlZEFycmF5XCIsIFwiRGF0YVZpZXdcIl0sXG4gICAgICAgIHNpemVPcktleSxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBzaXplT3JLZXkgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHZhbGlkYXRlSW50MzIoc2l6ZU9yS2V5LCBcInNpemVPcktleVwiKTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBrZXlFbmNvZGluZyAmJlxuICAgICAgIUJ1ZmZlci5pc0VuY29kaW5nKGtleUVuY29kaW5nIGFzIEJpbmFyeVRvVGV4dEVuY29kaW5nKSAmJlxuICAgICAga2V5RW5jb2RpbmcgIT09IFwiYnVmZmVyXCJcbiAgICApIHtcbiAgICAgIGdlbkVuY29kaW5nID0gZ2VuZXJhdG9yO1xuICAgICAgZ2VuZXJhdG9yID0ga2V5RW5jb2Rpbmc7XG4gICAgICBrZXlFbmNvZGluZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGVuY29kaW5nID0gZ2V0RGVmYXVsdEVuY29kaW5nKCk7XG4gICAga2V5RW5jb2RpbmcgPSBrZXlFbmNvZGluZyB8fCBlbmNvZGluZztcbiAgICBnZW5FbmNvZGluZyA9IGdlbkVuY29kaW5nIHx8IGVuY29kaW5nO1xuXG4gICAgaWYgKHR5cGVvZiBzaXplT3JLZXkgIT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHNpemVPcktleSA9IHRvQnVmKHNpemVPcktleSBhcyBzdHJpbmcsIGtleUVuY29kaW5nIGFzIHN0cmluZyk7XG4gICAgfVxuXG4gICAgaWYgKCFnZW5lcmF0b3IpIHtcbiAgICAgIGdlbmVyYXRvciA9IERIX0dFTkVSQVRPUjtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBnZW5lcmF0b3IgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgIHZhbGlkYXRlSW50MzIoZ2VuZXJhdG9yLCBcImdlbmVyYXRvclwiKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBnZW5lcmF0b3IgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGdlbmVyYXRvciA9IHRvQnVmKGdlbmVyYXRvciwgZ2VuRW5jb2RpbmcgYXMgc3RyaW5nKTtcbiAgICB9IGVsc2UgaWYgKCFpc0FycmF5QnVmZmVyVmlldyhnZW5lcmF0b3IpICYmICFpc0FueUFycmF5QnVmZmVyKGdlbmVyYXRvcikpIHtcbiAgICAgIHRocm93IG5ldyBFUlJfSU5WQUxJRF9BUkdfVFlQRShcbiAgICAgICAgXCJnZW5lcmF0b3JcIixcbiAgICAgICAgW1wibnVtYmVyXCIsIFwic3RyaW5nXCIsIFwiQXJyYXlCdWZmZXJcIiwgXCJCdWZmZXJcIiwgXCJUeXBlZEFycmF5XCIsIFwiRGF0YVZpZXdcIl0sXG4gICAgICAgIGdlbmVyYXRvcixcbiAgICAgICk7XG4gICAgfVxuXG4gICAgbm90SW1wbGVtZW50ZWQoXCJjcnlwdG8uRGlmZmllSGVsbG1hblwiKTtcbiAgfVxuXG4gIGNvbXB1dGVTZWNyZXQob3RoZXJQdWJsaWNLZXk6IEFycmF5QnVmZmVyVmlldyk6IEJ1ZmZlcjtcbiAgY29tcHV0ZVNlY3JldChcbiAgICBvdGhlclB1YmxpY0tleTogc3RyaW5nLFxuICAgIGlucHV0RW5jb2Rpbmc6IEJpbmFyeVRvVGV4dEVuY29kaW5nLFxuICApOiBCdWZmZXI7XG4gIGNvbXB1dGVTZWNyZXQoXG4gICAgb3RoZXJQdWJsaWNLZXk6IEFycmF5QnVmZmVyVmlldyxcbiAgICBvdXRwdXRFbmNvZGluZzogQmluYXJ5VG9UZXh0RW5jb2RpbmcsXG4gICk6IHN0cmluZztcbiAgY29tcHV0ZVNlY3JldChcbiAgICBvdGhlclB1YmxpY0tleTogc3RyaW5nLFxuICAgIGlucHV0RW5jb2Rpbmc6IEJpbmFyeVRvVGV4dEVuY29kaW5nLFxuICAgIG91dHB1dEVuY29kaW5nOiBCaW5hcnlUb1RleHRFbmNvZGluZyxcbiAgKTogc3RyaW5nO1xuICBjb21wdXRlU2VjcmV0KFxuICAgIF9vdGhlclB1YmxpY0tleTogQXJyYXlCdWZmZXJWaWV3IHwgc3RyaW5nLFxuICAgIF9pbnB1dEVuY29kaW5nPzogQmluYXJ5VG9UZXh0RW5jb2RpbmcsXG4gICAgX291dHB1dEVuY29kaW5nPzogQmluYXJ5VG9UZXh0RW5jb2RpbmcsXG4gICk6IEJ1ZmZlciB8IHN0cmluZyB7XG4gICAgbm90SW1wbGVtZW50ZWQoXCJjcnlwdG8uRGlmZmllSGVsbG1hbi5wcm90b3R5cGUuY29tcHV0ZVNlY3JldFwiKTtcbiAgfVxuXG4gIGdlbmVyYXRlS2V5cygpOiBCdWZmZXI7XG4gIGdlbmVyYXRlS2V5cyhlbmNvZGluZzogQmluYXJ5VG9UZXh0RW5jb2RpbmcpOiBzdHJpbmc7XG4gIGdlbmVyYXRlS2V5cyhfZW5jb2Rpbmc/OiBCaW5hcnlUb1RleHRFbmNvZGluZyk6IEJ1ZmZlciB8IHN0cmluZyB7XG4gICAgbm90SW1wbGVtZW50ZWQoXCJjcnlwdG8uRGlmZmllSGVsbG1hbi5wcm90b3R5cGUuZ2VuZXJhdGVLZXlzXCIpO1xuICB9XG5cbiAgZ2V0R2VuZXJhdG9yKCk6IEJ1ZmZlcjtcbiAgZ2V0R2VuZXJhdG9yKGVuY29kaW5nOiBCaW5hcnlUb1RleHRFbmNvZGluZyk6IHN0cmluZztcbiAgZ2V0R2VuZXJhdG9yKF9lbmNvZGluZz86IEJpbmFyeVRvVGV4dEVuY29kaW5nKTogQnVmZmVyIHwgc3RyaW5nIHtcbiAgICBub3RJbXBsZW1lbnRlZChcImNyeXB0by5EaWZmaWVIZWxsbWFuLnByb3RvdHlwZS5nZXRHZW5lcmF0b3JcIik7XG4gIH1cblxuICBnZXRQcmltZSgpOiBCdWZmZXI7XG4gIGdldFByaW1lKGVuY29kaW5nOiBCaW5hcnlUb1RleHRFbmNvZGluZyk6IHN0cmluZztcbiAgZ2V0UHJpbWUoX2VuY29kaW5nPzogQmluYXJ5VG9UZXh0RW5jb2RpbmcpOiBCdWZmZXIgfCBzdHJpbmcge1xuICAgIG5vdEltcGxlbWVudGVkKFwiY3J5cHRvLkRpZmZpZUhlbGxtYW4ucHJvdG90eXBlLmdldFByaW1lXCIpO1xuICB9XG5cbiAgZ2V0UHJpdmF0ZUtleSgpOiBCdWZmZXI7XG4gIGdldFByaXZhdGVLZXkoZW5jb2Rpbmc6IEJpbmFyeVRvVGV4dEVuY29kaW5nKTogc3RyaW5nO1xuICBnZXRQcml2YXRlS2V5KF9lbmNvZGluZz86IEJpbmFyeVRvVGV4dEVuY29kaW5nKTogQnVmZmVyIHwgc3RyaW5nIHtcbiAgICBub3RJbXBsZW1lbnRlZChcImNyeXB0by5EaWZmaWVIZWxsbWFuLnByb3RvdHlwZS5nZXRQcml2YXRlS2V5XCIpO1xuICB9XG5cbiAgZ2V0UHVibGljS2V5KCk6IEJ1ZmZlcjtcbiAgZ2V0UHVibGljS2V5KGVuY29kaW5nOiBCaW5hcnlUb1RleHRFbmNvZGluZyk6IHN0cmluZztcbiAgZ2V0UHVibGljS2V5KF9lbmNvZGluZz86IEJpbmFyeVRvVGV4dEVuY29kaW5nKTogQnVmZmVyIHwgc3RyaW5nIHtcbiAgICBub3RJbXBsZW1lbnRlZChcImNyeXB0by5EaWZmaWVIZWxsbWFuLnByb3RvdHlwZS5nZXRQdWJsaWNLZXlcIik7XG4gIH1cblxuICBzZXRQcml2YXRlS2V5KHByaXZhdGVLZXk6IEFycmF5QnVmZmVyVmlldyk6IHZvaWQ7XG4gIHNldFByaXZhdGVLZXkocHJpdmF0ZUtleTogc3RyaW5nLCBlbmNvZGluZzogQnVmZmVyRW5jb2RpbmcpOiB2b2lkO1xuICBzZXRQcml2YXRlS2V5KFxuICAgIF9wcml2YXRlS2V5OiBBcnJheUJ1ZmZlclZpZXcgfCBzdHJpbmcsXG4gICAgX2VuY29kaW5nPzogQnVmZmVyRW5jb2RpbmcsXG4gICkge1xuICAgIG5vdEltcGxlbWVudGVkKFwiY3J5cHRvLkRpZmZpZUhlbGxtYW4ucHJvdG90eXBlLnNldFByaXZhdGVLZXlcIik7XG4gIH1cblxuICBzZXRQdWJsaWNLZXkocHVibGljS2V5OiBBcnJheUJ1ZmZlclZpZXcpOiB2b2lkO1xuICBzZXRQdWJsaWNLZXkocHVibGljS2V5OiBzdHJpbmcsIGVuY29kaW5nOiBCdWZmZXJFbmNvZGluZyk6IHZvaWQ7XG4gIHNldFB1YmxpY0tleShcbiAgICBfcHVibGljS2V5OiBBcnJheUJ1ZmZlclZpZXcgfCBzdHJpbmcsXG4gICAgX2VuY29kaW5nPzogQnVmZmVyRW5jb2RpbmcsXG4gICkge1xuICAgIG5vdEltcGxlbWVudGVkKFwiY3J5cHRvLkRpZmZpZUhlbGxtYW4ucHJvdG90eXBlLnNldFB1YmxpY0tleVwiKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRGlmZmllSGVsbG1hbkdyb3VwIHtcbiAgdmVyaWZ5RXJyb3IhOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoX25hbWU6IHN0cmluZykge1xuICAgIG5vdEltcGxlbWVudGVkKFwiY3J5cHRvLkRpZmZpZUhlbGxtYW5Hcm91cFwiKTtcbiAgfVxuXG4gIGNvbXB1dGVTZWNyZXQob3RoZXJQdWJsaWNLZXk6IEFycmF5QnVmZmVyVmlldyk6IEJ1ZmZlcjtcbiAgY29tcHV0ZVNlY3JldChcbiAgICBvdGhlclB1YmxpY0tleTogc3RyaW5nLFxuICAgIGlucHV0RW5jb2Rpbmc6IEJpbmFyeVRvVGV4dEVuY29kaW5nLFxuICApOiBCdWZmZXI7XG4gIGNvbXB1dGVTZWNyZXQoXG4gICAgb3RoZXJQdWJsaWNLZXk6IEFycmF5QnVmZmVyVmlldyxcbiAgICBvdXRwdXRFbmNvZGluZzogQmluYXJ5VG9UZXh0RW5jb2RpbmcsXG4gICk6IHN0cmluZztcbiAgY29tcHV0ZVNlY3JldChcbiAgICBvdGhlclB1YmxpY0tleTogc3RyaW5nLFxuICAgIGlucHV0RW5jb2Rpbmc6IEJpbmFyeVRvVGV4dEVuY29kaW5nLFxuICAgIG91dHB1dEVuY29kaW5nOiBCaW5hcnlUb1RleHRFbmNvZGluZyxcbiAgKTogc3RyaW5nO1xuICBjb21wdXRlU2VjcmV0KFxuICAgIF9vdGhlclB1YmxpY0tleTogQXJyYXlCdWZmZXJWaWV3IHwgc3RyaW5nLFxuICAgIF9pbnB1dEVuY29kaW5nPzogQmluYXJ5VG9UZXh0RW5jb2RpbmcsXG4gICAgX291dHB1dEVuY29kaW5nPzogQmluYXJ5VG9UZXh0RW5jb2RpbmcsXG4gICk6IEJ1ZmZlciB8IHN0cmluZyB7XG4gICAgbm90SW1wbGVtZW50ZWQoXCJjcnlwdG8uRGlmZmllSGVsbG1hbi5wcm90b3R5cGUuY29tcHV0ZVNlY3JldFwiKTtcbiAgfVxuXG4gIGdlbmVyYXRlS2V5cygpOiBCdWZmZXI7XG4gIGdlbmVyYXRlS2V5cyhlbmNvZGluZzogQmluYXJ5VG9UZXh0RW5jb2RpbmcpOiBzdHJpbmc7XG4gIGdlbmVyYXRlS2V5cyhfZW5jb2Rpbmc/OiBCaW5hcnlUb1RleHRFbmNvZGluZyk6IEJ1ZmZlciB8IHN0cmluZyB7XG4gICAgbm90SW1wbGVtZW50ZWQoXCJjcnlwdG8uRGlmZmllSGVsbG1hbi5wcm90b3R5cGUuZ2VuZXJhdGVLZXlzXCIpO1xuICB9XG5cbiAgZ2V0R2VuZXJhdG9yKCk6IEJ1ZmZlcjtcbiAgZ2V0R2VuZXJhdG9yKGVuY29kaW5nOiBCaW5hcnlUb1RleHRFbmNvZGluZyk6IHN0cmluZztcbiAgZ2V0R2VuZXJhdG9yKF9lbmNvZGluZz86IEJpbmFyeVRvVGV4dEVuY29kaW5nKTogQnVmZmVyIHwgc3RyaW5nIHtcbiAgICBub3RJbXBsZW1lbnRlZChcImNyeXB0by5EaWZmaWVIZWxsbWFuLnByb3RvdHlwZS5nZXRHZW5lcmF0b3JcIik7XG4gIH1cblxuICBnZXRQcmltZSgpOiBCdWZmZXI7XG4gIGdldFByaW1lKGVuY29kaW5nOiBCaW5hcnlUb1RleHRFbmNvZGluZyk6IHN0cmluZztcbiAgZ2V0UHJpbWUoX2VuY29kaW5nPzogQmluYXJ5VG9UZXh0RW5jb2RpbmcpOiBCdWZmZXIgfCBzdHJpbmcge1xuICAgIG5vdEltcGxlbWVudGVkKFwiY3J5cHRvLkRpZmZpZUhlbGxtYW4ucHJvdG90eXBlLmdldFByaW1lXCIpO1xuICB9XG5cbiAgZ2V0UHJpdmF0ZUtleSgpOiBCdWZmZXI7XG4gIGdldFByaXZhdGVLZXkoZW5jb2Rpbmc6IEJpbmFyeVRvVGV4dEVuY29kaW5nKTogc3RyaW5nO1xuICBnZXRQcml2YXRlS2V5KF9lbmNvZGluZz86IEJpbmFyeVRvVGV4dEVuY29kaW5nKTogQnVmZmVyIHwgc3RyaW5nIHtcbiAgICBub3RJbXBsZW1lbnRlZChcImNyeXB0by5EaWZmaWVIZWxsbWFuLnByb3RvdHlwZS5nZXRQcml2YXRlS2V5XCIpO1xuICB9XG5cbiAgZ2V0UHVibGljS2V5KCk6IEJ1ZmZlcjtcbiAgZ2V0UHVibGljS2V5KGVuY29kaW5nOiBCaW5hcnlUb1RleHRFbmNvZGluZyk6IHN0cmluZztcbiAgZ2V0UHVibGljS2V5KF9lbmNvZGluZz86IEJpbmFyeVRvVGV4dEVuY29kaW5nKTogQnVmZmVyIHwgc3RyaW5nIHtcbiAgICBub3RJbXBsZW1lbnRlZChcImNyeXB0by5EaWZmaWVIZWxsbWFuLnByb3RvdHlwZS5nZXRQdWJsaWNLZXlcIik7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEVDREgge1xuICBjb25zdHJ1Y3RvcihjdXJ2ZTogc3RyaW5nKSB7XG4gICAgdmFsaWRhdGVTdHJpbmcoY3VydmUsIFwiY3VydmVcIik7XG5cbiAgICBub3RJbXBsZW1lbnRlZChcImNyeXB0by5FQ0RIXCIpO1xuICB9XG5cbiAgc3RhdGljIGNvbnZlcnRLZXkoXG4gICAgX2tleTogQmluYXJ5TGlrZSxcbiAgICBfY3VydmU6IHN0cmluZyxcbiAgICBfaW5wdXRFbmNvZGluZz86IEJpbmFyeVRvVGV4dEVuY29kaW5nLFxuICAgIF9vdXRwdXRFbmNvZGluZz86IFwibGF0aW4xXCIgfCBcImhleFwiIHwgXCJiYXNlNjRcIiB8IFwiYmFzZTY0dXJsXCIsXG4gICAgX2Zvcm1hdD86IFwidW5jb21wcmVzc2VkXCIgfCBcImNvbXByZXNzZWRcIiB8IFwiaHlicmlkXCIsXG4gICk6IEJ1ZmZlciB8IHN0cmluZyB7XG4gICAgbm90SW1wbGVtZW50ZWQoXCJjcnlwdG8uRUNESC5wcm90b3R5cGUuY29udmVydEtleVwiKTtcbiAgfVxuXG4gIGNvbXB1dGVTZWNyZXQob3RoZXJQdWJsaWNLZXk6IEFycmF5QnVmZmVyVmlldyk6IEJ1ZmZlcjtcbiAgY29tcHV0ZVNlY3JldChcbiAgICBvdGhlclB1YmxpY0tleTogc3RyaW5nLFxuICAgIGlucHV0RW5jb2Rpbmc6IEJpbmFyeVRvVGV4dEVuY29kaW5nLFxuICApOiBCdWZmZXI7XG4gIGNvbXB1dGVTZWNyZXQoXG4gICAgb3RoZXJQdWJsaWNLZXk6IEFycmF5QnVmZmVyVmlldyxcbiAgICBvdXRwdXRFbmNvZGluZzogQmluYXJ5VG9UZXh0RW5jb2RpbmcsXG4gICk6IHN0cmluZztcbiAgY29tcHV0ZVNlY3JldChcbiAgICBvdGhlclB1YmxpY0tleTogc3RyaW5nLFxuICAgIGlucHV0RW5jb2Rpbmc6IEJpbmFyeVRvVGV4dEVuY29kaW5nLFxuICAgIG91dHB1dEVuY29kaW5nOiBCaW5hcnlUb1RleHRFbmNvZGluZyxcbiAgKTogc3RyaW5nO1xuICBjb21wdXRlU2VjcmV0KFxuICAgIF9vdGhlclB1YmxpY0tleTogQXJyYXlCdWZmZXJWaWV3IHwgc3RyaW5nLFxuICAgIF9pbnB1dEVuY29kaW5nPzogQmluYXJ5VG9UZXh0RW5jb2RpbmcsXG4gICAgX291dHB1dEVuY29kaW5nPzogQmluYXJ5VG9UZXh0RW5jb2RpbmcsXG4gICk6IEJ1ZmZlciB8IHN0cmluZyB7XG4gICAgbm90SW1wbGVtZW50ZWQoXCJjcnlwdG8uRUNESC5wcm90b3R5cGUuY29tcHV0ZVNlY3JldFwiKTtcbiAgfVxuXG4gIGdlbmVyYXRlS2V5cygpOiBCdWZmZXI7XG4gIGdlbmVyYXRlS2V5cyhlbmNvZGluZzogQmluYXJ5VG9UZXh0RW5jb2RpbmcsIGZvcm1hdD86IEVDREhLZXlGb3JtYXQpOiBzdHJpbmc7XG4gIGdlbmVyYXRlS2V5cyhcbiAgICBfZW5jb2Rpbmc/OiBCaW5hcnlUb1RleHRFbmNvZGluZyxcbiAgICBfZm9ybWF0PzogRUNESEtleUZvcm1hdCxcbiAgKTogQnVmZmVyIHwgc3RyaW5nIHtcbiAgICBub3RJbXBsZW1lbnRlZChcImNyeXB0by5FQ0RILnByb3RvdHlwZS5nZW5lcmF0ZUtleXNcIik7XG4gIH1cblxuICBnZXRQcml2YXRlS2V5KCk6IEJ1ZmZlcjtcbiAgZ2V0UHJpdmF0ZUtleShlbmNvZGluZzogQmluYXJ5VG9UZXh0RW5jb2RpbmcpOiBzdHJpbmc7XG4gIGdldFByaXZhdGVLZXkoX2VuY29kaW5nPzogQmluYXJ5VG9UZXh0RW5jb2RpbmcpOiBCdWZmZXIgfCBzdHJpbmcge1xuICAgIG5vdEltcGxlbWVudGVkKFwiY3J5cHRvLkVDREgucHJvdG90eXBlLmdldFByaXZhdGVLZXlcIik7XG4gIH1cblxuICBnZXRQdWJsaWNLZXkoKTogQnVmZmVyO1xuICBnZXRQdWJsaWNLZXkoZW5jb2Rpbmc6IEJpbmFyeVRvVGV4dEVuY29kaW5nLCBmb3JtYXQ/OiBFQ0RIS2V5Rm9ybWF0KTogc3RyaW5nO1xuICBnZXRQdWJsaWNLZXkoXG4gICAgX2VuY29kaW5nPzogQmluYXJ5VG9UZXh0RW5jb2RpbmcsXG4gICAgX2Zvcm1hdD86IEVDREhLZXlGb3JtYXQsXG4gICk6IEJ1ZmZlciB8IHN0cmluZyB7XG4gICAgbm90SW1wbGVtZW50ZWQoXCJjcnlwdG8uRUNESC5wcm90b3R5cGUuZ2V0UHVibGljS2V5XCIpO1xuICB9XG5cbiAgc2V0UHJpdmF0ZUtleShwcml2YXRlS2V5OiBBcnJheUJ1ZmZlclZpZXcpOiB2b2lkO1xuICBzZXRQcml2YXRlS2V5KHByaXZhdGVLZXk6IHN0cmluZywgZW5jb2Rpbmc6IEJpbmFyeVRvVGV4dEVuY29kaW5nKTogdm9pZDtcbiAgc2V0UHJpdmF0ZUtleShcbiAgICBfcHJpdmF0ZUtleTogQXJyYXlCdWZmZXJWaWV3IHwgc3RyaW5nLFxuICAgIF9lbmNvZGluZz86IEJpbmFyeVRvVGV4dEVuY29kaW5nLFxuICApOiBCdWZmZXIgfCBzdHJpbmcge1xuICAgIG5vdEltcGxlbWVudGVkKFwiY3J5cHRvLkVDREgucHJvdG90eXBlLnNldFByaXZhdGVLZXlcIik7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpZmZpZUhlbGxtYW4oX29wdGlvbnM6IHtcbiAgcHJpdmF0ZUtleTogS2V5T2JqZWN0O1xuICBwdWJsaWNLZXk6IEtleU9iamVjdDtcbn0pOiBCdWZmZXIge1xuICBub3RJbXBsZW1lbnRlZChcImNyeXB0by5kaWZmaWVIZWxsbWFuXCIpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIERpZmZpZUhlbGxtYW4sXG4gIERpZmZpZUhlbGxtYW5Hcm91cCxcbiAgRUNESCxcbiAgZGlmZmllSGVsbG1hbixcbn07XG4iXX0=