import { ERR_INVALID_ARG_TYPE } from "../errors.ts";
import { validateInt32, validateObject } from "../validators.mjs";
import { notImplemented } from "../../_utils.ts";
import { Transform } from "../../_stream.mjs";
import { privateDecrypt, privateEncrypt, publicDecrypt, publicEncrypt, } from "../../_crypto/crypto_browserify/public_encrypt/mod.js";
export { privateDecrypt, privateEncrypt, publicDecrypt, publicEncrypt, } from "../../_crypto/crypto_browserify/public_encrypt/mod.js";
export class Cipheriv extends Transform {
    constructor(_cipher, _key, _iv, _options) {
        super();
        notImplemented("crypto.Cipheriv");
    }
    final(_outputEncoding) {
        notImplemented("crypto.Cipheriv.prototype.final");
    }
    getAuthTag() {
        notImplemented("crypto.Cipheriv.prototype.getAuthTag");
    }
    setAAD(_buffer, _options) {
        notImplemented("crypto.Cipheriv.prototype.setAAD");
    }
    setAutoPadding(_autoPadding) {
        notImplemented("crypto.Cipheriv.prototype.setAutoPadding");
    }
    update(_data, _inputEncoding, _outputEncoding) {
        notImplemented("crypto.Cipheriv.prototype.update");
    }
}
export class Decipheriv extends Transform {
    constructor(_cipher, _key, _iv, _options) {
        super();
        notImplemented("crypto.Decipheriv");
    }
    final(_outputEncoding) {
        notImplemented("crypto.Decipheriv.prototype.final");
    }
    setAAD(_buffer, _options) {
        notImplemented("crypto.Decipheriv.prototype.setAAD");
    }
    setAuthTag(_buffer, _encoding) {
        notImplemented("crypto.Decipheriv.prototype.setAuthTag");
    }
    setAutoPadding(_autoPadding) {
        notImplemented("crypto.Decipheriv.prototype.setAutoPadding");
    }
    update(_data, _inputEncoding, _outputEncoding) {
        notImplemented("crypto.Decipheriv.prototype.update");
    }
}
export function getCipherInfo(nameOrNid, options) {
    if (typeof nameOrNid !== "string" && typeof nameOrNid !== "number") {
        throw new ERR_INVALID_ARG_TYPE("nameOrNid", ["string", "number"], nameOrNid);
    }
    if (typeof nameOrNid === "number") {
        validateInt32(nameOrNid, "nameOrNid");
    }
    let keyLength, ivLength;
    if (options !== undefined) {
        validateObject(options, "options");
        ({ keyLength, ivLength } = options);
        if (keyLength !== undefined) {
            validateInt32(keyLength, "options.keyLength");
        }
        if (ivLength !== undefined) {
            validateInt32(ivLength, "options.ivLength");
        }
    }
    notImplemented("crypto.getCipherInfo");
}
export default {
    privateDecrypt,
    privateEncrypt,
    publicDecrypt,
    publicEncrypt,
    Cipheriv,
    Decipheriv,
    getCipherInfo,
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2lwaGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiY2lwaGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUdBLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLGNBQWMsQ0FBQztBQUNwRCxPQUFPLEVBQUUsYUFBYSxFQUFFLGNBQWMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRWxFLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUVqRCxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sbUJBQW1CLENBQUM7QUFJOUMsT0FBTyxFQUNMLGNBQWMsRUFDZCxjQUFjLEVBQ2QsYUFBYSxFQUNiLGFBQWEsR0FDZCxNQUFNLHVEQUF1RCxDQUFDO0FBRS9ELE9BQU8sRUFDTCxjQUFjLEVBQ2QsY0FBYyxFQUNkLGFBQWEsRUFDYixhQUFhLEdBQ2QsTUFBTSx1REFBdUQsQ0FBQztBQTBHL0QsTUFBTSxPQUFPLFFBQVMsU0FBUSxTQUFTO0lBQ3JDLFlBQ0UsT0FBZSxFQUNmLElBQWUsRUFDZixHQUFzQixFQUN0QixRQUEyQjtRQUUzQixLQUFLLEVBQUUsQ0FBQztRQUVSLGNBQWMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQ3BDLENBQUM7SUFJRCxLQUFLLENBQUMsZUFBd0I7UUFDNUIsY0FBYyxDQUFDLGlDQUFpQyxDQUFDLENBQUM7SUFDcEQsQ0FBQztJQUVELFVBQVU7UUFDUixjQUFjLENBQUMsc0NBQXNDLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBRUQsTUFBTSxDQUNKLE9BQXdCLEVBQ3hCLFFBRUM7UUFFRCxjQUFjLENBQUMsa0NBQWtDLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBRUQsY0FBYyxDQUFDLFlBQXNCO1FBQ25DLGNBQWMsQ0FBQywwQ0FBMEMsQ0FBQyxDQUFDO0lBQzdELENBQUM7SUFjRCxNQUFNLENBQ0osS0FBNEMsRUFDNUMsY0FBeUIsRUFDekIsZUFBMEI7UUFFMUIsY0FBYyxDQUFDLGtDQUFrQyxDQUFDLENBQUM7SUFDckQsQ0FBQztDQUNGO0FBRUQsTUFBTSxPQUFPLFVBQVcsU0FBUSxTQUFTO0lBQ3ZDLFlBQ0UsT0FBZSxFQUNmLElBQWUsRUFDZixHQUFzQixFQUN0QixRQUEyQjtRQUUzQixLQUFLLEVBQUUsQ0FBQztRQUVSLGNBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFJRCxLQUFLLENBQUMsZUFBd0I7UUFDNUIsY0FBYyxDQUFDLG1DQUFtQyxDQUFDLENBQUM7SUFDdEQsQ0FBQztJQUVELE1BQU0sQ0FDSixPQUF3QixFQUN4QixRQUVDO1FBRUQsY0FBYyxDQUFDLG9DQUFvQyxDQUFDLENBQUM7SUFDdkQsQ0FBQztJQUVELFVBQVUsQ0FBQyxPQUFtQixFQUFFLFNBQWtCO1FBQ2hELGNBQWMsQ0FBQyx3Q0FBd0MsQ0FBQyxDQUFDO0lBQzNELENBQUM7SUFFRCxjQUFjLENBQUMsWUFBc0I7UUFDbkMsY0FBYyxDQUFDLDRDQUE0QyxDQUFDLENBQUM7SUFDL0QsQ0FBQztJQWNELE1BQU0sQ0FDSixLQUE0QyxFQUM1QyxjQUF5QixFQUN6QixlQUEwQjtRQUUxQixjQUFjLENBQUMsb0NBQW9DLENBQUMsQ0FBQztJQUN2RCxDQUFDO0NBQ0Y7QUFFRCxNQUFNLFVBQVUsYUFBYSxDQUMzQixTQUEwQixFQUMxQixPQUFtRDtJQUVuRCxJQUFJLE9BQU8sU0FBUyxLQUFLLFFBQVEsSUFBSSxPQUFPLFNBQVMsS0FBSyxRQUFRLEVBQUU7UUFDbEUsTUFBTSxJQUFJLG9CQUFvQixDQUM1QixXQUFXLEVBQ1gsQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLEVBQ3BCLFNBQVMsQ0FDVixDQUFDO0tBQ0g7SUFFRCxJQUFJLE9BQU8sU0FBUyxLQUFLLFFBQVEsRUFBRTtRQUNqQyxhQUFhLENBQUMsU0FBUyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0tBQ3ZDO0lBRUQsSUFBSSxTQUFTLEVBQUUsUUFBUSxDQUFDO0lBRXhCLElBQUksT0FBTyxLQUFLLFNBQVMsRUFBRTtRQUN6QixjQUFjLENBQUMsT0FBTyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBRW5DLENBQUMsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLEdBQUcsT0FBTyxDQUFDLENBQUM7UUFFcEMsSUFBSSxTQUFTLEtBQUssU0FBUyxFQUFFO1lBQzNCLGFBQWEsQ0FBQyxTQUFTLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztTQUMvQztRQUVELElBQUksUUFBUSxLQUFLLFNBQVMsRUFBRTtZQUMxQixhQUFhLENBQUMsUUFBUSxFQUFFLGtCQUFrQixDQUFDLENBQUM7U0FDN0M7S0FDRjtJQUVELGNBQWMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0FBQ3pDLENBQUM7QUFFRCxlQUFlO0lBQ2IsY0FBYztJQUNkLGNBQWM7SUFDZCxhQUFhO0lBQ2IsYUFBYTtJQUNiLFFBQVE7SUFDUixVQUFVO0lBQ1YsYUFBYTtDQUNkLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIyIHRoZSBEZW5vIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuIE1JVCBsaWNlbnNlLlxuLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgTm9kZS5qcyBjb250cmlidXRvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuIE1JVCBsaWNlbnNlLlxuXG5pbXBvcnQgeyBFUlJfSU5WQUxJRF9BUkdfVFlQRSB9IGZyb20gXCIuLi9lcnJvcnMudHNcIjtcbmltcG9ydCB7IHZhbGlkYXRlSW50MzIsIHZhbGlkYXRlT2JqZWN0IH0gZnJvbSBcIi4uL3ZhbGlkYXRvcnMubWpzXCI7XG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tIFwiLi4vLi4vYnVmZmVyLnRzXCI7XG5pbXBvcnQgeyBub3RJbXBsZW1lbnRlZCB9IGZyb20gXCIuLi8uLi9fdXRpbHMudHNcIjtcbmltcG9ydCB0eXBlIHsgVHJhbnNmb3JtT3B0aW9ucyB9IGZyb20gXCIuLi8uLi9fc3RyZWFtLmQudHNcIjtcbmltcG9ydCB7IFRyYW5zZm9ybSB9IGZyb20gXCIuLi8uLi9fc3RyZWFtLm1qc1wiO1xuaW1wb3J0IHsgS2V5T2JqZWN0IH0gZnJvbSBcIi4va2V5cy50c1wiO1xuaW1wb3J0IHR5cGUgeyBCdWZmZXJFbmNvZGluZyB9IGZyb20gXCIuLi8uLi9fZ2xvYmFsLmQudHNcIjtcbmltcG9ydCB0eXBlIHsgQmluYXJ5TGlrZSwgRW5jb2RpbmcgfSBmcm9tIFwiLi90eXBlcy50c1wiO1xuaW1wb3J0IHtcbiAgcHJpdmF0ZURlY3J5cHQsXG4gIHByaXZhdGVFbmNyeXB0LFxuICBwdWJsaWNEZWNyeXB0LFxuICBwdWJsaWNFbmNyeXB0LFxufSBmcm9tIFwiLi4vLi4vX2NyeXB0by9jcnlwdG9fYnJvd3NlcmlmeS9wdWJsaWNfZW5jcnlwdC9tb2QuanNcIjtcblxuZXhwb3J0IHtcbiAgcHJpdmF0ZURlY3J5cHQsXG4gIHByaXZhdGVFbmNyeXB0LFxuICBwdWJsaWNEZWNyeXB0LFxuICBwdWJsaWNFbmNyeXB0LFxufSBmcm9tIFwiLi4vLi4vX2NyeXB0by9jcnlwdG9fYnJvd3NlcmlmeS9wdWJsaWNfZW5jcnlwdC9tb2QuanNcIjtcblxuZXhwb3J0IHR5cGUgQ2lwaGVyQ0NNVHlwZXMgPVxuICB8IFwiYWVzLTEyOC1jY21cIlxuICB8IFwiYWVzLTE5Mi1jY21cIlxuICB8IFwiYWVzLTI1Ni1jY21cIlxuICB8IFwiY2hhY2hhMjAtcG9seTEzMDVcIjtcbmV4cG9ydCB0eXBlIENpcGhlckdDTVR5cGVzID0gXCJhZXMtMTI4LWdjbVwiIHwgXCJhZXMtMTkyLWdjbVwiIHwgXCJhZXMtMjU2LWdjbVwiO1xuZXhwb3J0IHR5cGUgQ2lwaGVyT0NCVHlwZXMgPSBcImFlcy0xMjgtb2NiXCIgfCBcImFlcy0xOTItb2NiXCIgfCBcImFlcy0yNTYtb2NiXCI7XG5cbmV4cG9ydCB0eXBlIENpcGhlcktleSA9IEJpbmFyeUxpa2UgfCBLZXlPYmplY3Q7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2lwaGVyQ0NNT3B0aW9ucyBleHRlbmRzIFRyYW5zZm9ybU9wdGlvbnMge1xuICBhdXRoVGFnTGVuZ3RoOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2lwaGVyR0NNT3B0aW9ucyBleHRlbmRzIFRyYW5zZm9ybU9wdGlvbnMge1xuICBhdXRoVGFnTGVuZ3RoPzogbnVtYmVyIHwgdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENpcGhlck9DQk9wdGlvbnMgZXh0ZW5kcyBUcmFuc2Zvcm1PcHRpb25zIHtcbiAgYXV0aFRhZ0xlbmd0aDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENpcGhlciBleHRlbmRzIFJldHVyblR5cGU8dHlwZW9mIFRyYW5zZm9ybT4ge1xuICB1cGRhdGUoZGF0YTogQmluYXJ5TGlrZSk6IEJ1ZmZlcjtcbiAgdXBkYXRlKGRhdGE6IHN0cmluZywgaW5wdXRFbmNvZGluZzogRW5jb2RpbmcpOiBCdWZmZXI7XG4gIHVwZGF0ZShcbiAgICBkYXRhOiBBcnJheUJ1ZmZlclZpZXcsXG4gICAgaW5wdXRFbmNvZGluZzogdW5kZWZpbmVkLFxuICAgIG91dHB1dEVuY29kaW5nOiBFbmNvZGluZyxcbiAgKTogc3RyaW5nO1xuICB1cGRhdGUoXG4gICAgZGF0YTogc3RyaW5nLFxuICAgIGlucHV0RW5jb2Rpbmc6IEVuY29kaW5nIHwgdW5kZWZpbmVkLFxuICAgIG91dHB1dEVuY29kaW5nOiBFbmNvZGluZyxcbiAgKTogc3RyaW5nO1xuXG4gIGZpbmFsKCk6IEJ1ZmZlcjtcbiAgZmluYWwob3V0cHV0RW5jb2Rpbmc6IEJ1ZmZlckVuY29kaW5nKTogc3RyaW5nO1xuXG4gIHNldEF1dG9QYWRkaW5nKGF1dG9QYWRkaW5nPzogYm9vbGVhbik6IHRoaXM7XG59XG5cbmV4cG9ydCB0eXBlIERlY2lwaGVyID0gQ2lwaGVyO1xuXG5leHBvcnQgaW50ZXJmYWNlIENpcGhlckNDTSBleHRlbmRzIENpcGhlciB7XG4gIHNldEFBRChcbiAgICBidWZmZXI6IEFycmF5QnVmZmVyVmlldyxcbiAgICBvcHRpb25zOiB7XG4gICAgICBwbGFpbnRleHRMZW5ndGg6IG51bWJlcjtcbiAgICB9LFxuICApOiB0aGlzO1xuICBnZXRBdXRoVGFnKCk6IEJ1ZmZlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaXBoZXJHQ00gZXh0ZW5kcyBDaXBoZXIge1xuICBzZXRBQUQoXG4gICAgYnVmZmVyOiBBcnJheUJ1ZmZlclZpZXcsXG4gICAgb3B0aW9ucz86IHtcbiAgICAgIHBsYWludGV4dExlbmd0aDogbnVtYmVyO1xuICAgIH0sXG4gICk6IHRoaXM7XG4gIGdldEF1dGhUYWcoKTogQnVmZmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENpcGhlck9DQiBleHRlbmRzIENpcGhlciB7XG4gIHNldEFBRChcbiAgICBidWZmZXI6IEFycmF5QnVmZmVyVmlldyxcbiAgICBvcHRpb25zPzoge1xuICAgICAgcGxhaW50ZXh0TGVuZ3RoOiBudW1iZXI7XG4gICAgfSxcbiAgKTogdGhpcztcbiAgZ2V0QXV0aFRhZygpOiBCdWZmZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGVjaXBoZXJDQ00gZXh0ZW5kcyBEZWNpcGhlciB7XG4gIHNldEF1dGhUYWcoYnVmZmVyOiBBcnJheUJ1ZmZlclZpZXcpOiB0aGlzO1xuICBzZXRBQUQoXG4gICAgYnVmZmVyOiBBcnJheUJ1ZmZlclZpZXcsXG4gICAgb3B0aW9uczoge1xuICAgICAgcGxhaW50ZXh0TGVuZ3RoOiBudW1iZXI7XG4gICAgfSxcbiAgKTogdGhpcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZWNpcGhlckdDTSBleHRlbmRzIERlY2lwaGVyIHtcbiAgc2V0QXV0aFRhZyhidWZmZXI6IEFycmF5QnVmZmVyVmlldyk6IHRoaXM7XG4gIHNldEFBRChcbiAgICBidWZmZXI6IEFycmF5QnVmZmVyVmlldyxcbiAgICBvcHRpb25zPzoge1xuICAgICAgcGxhaW50ZXh0TGVuZ3RoOiBudW1iZXI7XG4gICAgfSxcbiAgKTogdGhpcztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBEZWNpcGhlck9DQiBleHRlbmRzIERlY2lwaGVyIHtcbiAgc2V0QXV0aFRhZyhidWZmZXI6IEFycmF5QnVmZmVyVmlldyk6IHRoaXM7XG4gIHNldEFBRChcbiAgICBidWZmZXI6IEFycmF5QnVmZmVyVmlldyxcbiAgICBvcHRpb25zPzoge1xuICAgICAgcGxhaW50ZXh0TGVuZ3RoOiBudW1iZXI7XG4gICAgfSxcbiAgKTogdGhpcztcbn1cblxuZXhwb3J0IGNsYXNzIENpcGhlcml2IGV4dGVuZHMgVHJhbnNmb3JtIGltcGxlbWVudHMgQ2lwaGVyIHtcbiAgY29uc3RydWN0b3IoXG4gICAgX2NpcGhlcjogc3RyaW5nLFxuICAgIF9rZXk6IENpcGhlcktleSxcbiAgICBfaXY6IEJpbmFyeUxpa2UgfCBudWxsLFxuICAgIF9vcHRpb25zPzogVHJhbnNmb3JtT3B0aW9ucyxcbiAgKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIG5vdEltcGxlbWVudGVkKFwiY3J5cHRvLkNpcGhlcml2XCIpO1xuICB9XG5cbiAgZmluYWwoKTogQnVmZmVyO1xuICBmaW5hbChvdXRwdXRFbmNvZGluZzogQnVmZmVyRW5jb2RpbmcpOiBzdHJpbmc7XG4gIGZpbmFsKF9vdXRwdXRFbmNvZGluZz86IHN0cmluZyk6IEJ1ZmZlciB8IHN0cmluZyB7XG4gICAgbm90SW1wbGVtZW50ZWQoXCJjcnlwdG8uQ2lwaGVyaXYucHJvdG90eXBlLmZpbmFsXCIpO1xuICB9XG5cbiAgZ2V0QXV0aFRhZygpOiBCdWZmZXIge1xuICAgIG5vdEltcGxlbWVudGVkKFwiY3J5cHRvLkNpcGhlcml2LnByb3RvdHlwZS5nZXRBdXRoVGFnXCIpO1xuICB9XG5cbiAgc2V0QUFEKFxuICAgIF9idWZmZXI6IEFycmF5QnVmZmVyVmlldyxcbiAgICBfb3B0aW9ucz86IHtcbiAgICAgIHBsYWludGV4dExlbmd0aDogbnVtYmVyO1xuICAgIH0sXG4gICk6IHRoaXMge1xuICAgIG5vdEltcGxlbWVudGVkKFwiY3J5cHRvLkNpcGhlcml2LnByb3RvdHlwZS5zZXRBQURcIik7XG4gIH1cblxuICBzZXRBdXRvUGFkZGluZyhfYXV0b1BhZGRpbmc/OiBib29sZWFuKTogdGhpcyB7XG4gICAgbm90SW1wbGVtZW50ZWQoXCJjcnlwdG8uQ2lwaGVyaXYucHJvdG90eXBlLnNldEF1dG9QYWRkaW5nXCIpO1xuICB9XG5cbiAgdXBkYXRlKGRhdGE6IEJpbmFyeUxpa2UpOiBCdWZmZXI7XG4gIHVwZGF0ZShkYXRhOiBzdHJpbmcsIGlucHV0RW5jb2Rpbmc6IEVuY29kaW5nKTogQnVmZmVyO1xuICB1cGRhdGUoXG4gICAgZGF0YTogQXJyYXlCdWZmZXJWaWV3LFxuICAgIGlucHV0RW5jb2Rpbmc6IHVuZGVmaW5lZCxcbiAgICBvdXRwdXRFbmNvZGluZzogRW5jb2RpbmcsXG4gICk6IHN0cmluZztcbiAgdXBkYXRlKFxuICAgIGRhdGE6IHN0cmluZyxcbiAgICBpbnB1dEVuY29kaW5nOiBFbmNvZGluZyB8IHVuZGVmaW5lZCxcbiAgICBvdXRwdXRFbmNvZGluZzogRW5jb2RpbmcsXG4gICk6IHN0cmluZztcbiAgdXBkYXRlKFxuICAgIF9kYXRhOiBzdHJpbmcgfCBCaW5hcnlMaWtlIHwgQXJyYXlCdWZmZXJWaWV3LFxuICAgIF9pbnB1dEVuY29kaW5nPzogRW5jb2RpbmcsXG4gICAgX291dHB1dEVuY29kaW5nPzogRW5jb2RpbmcsXG4gICk6IEJ1ZmZlciB8IHN0cmluZyB7XG4gICAgbm90SW1wbGVtZW50ZWQoXCJjcnlwdG8uQ2lwaGVyaXYucHJvdG90eXBlLnVwZGF0ZVwiKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRGVjaXBoZXJpdiBleHRlbmRzIFRyYW5zZm9ybSBpbXBsZW1lbnRzIENpcGhlciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIF9jaXBoZXI6IHN0cmluZyxcbiAgICBfa2V5OiBDaXBoZXJLZXksXG4gICAgX2l2OiBCaW5hcnlMaWtlIHwgbnVsbCxcbiAgICBfb3B0aW9ucz86IFRyYW5zZm9ybU9wdGlvbnMsXG4gICkge1xuICAgIHN1cGVyKCk7XG5cbiAgICBub3RJbXBsZW1lbnRlZChcImNyeXB0by5EZWNpcGhlcml2XCIpO1xuICB9XG5cbiAgZmluYWwoKTogQnVmZmVyO1xuICBmaW5hbChvdXRwdXRFbmNvZGluZzogQnVmZmVyRW5jb2RpbmcpOiBzdHJpbmc7XG4gIGZpbmFsKF9vdXRwdXRFbmNvZGluZz86IHN0cmluZyk6IEJ1ZmZlciB8IHN0cmluZyB7XG4gICAgbm90SW1wbGVtZW50ZWQoXCJjcnlwdG8uRGVjaXBoZXJpdi5wcm90b3R5cGUuZmluYWxcIik7XG4gIH1cblxuICBzZXRBQUQoXG4gICAgX2J1ZmZlcjogQXJyYXlCdWZmZXJWaWV3LFxuICAgIF9vcHRpb25zPzoge1xuICAgICAgcGxhaW50ZXh0TGVuZ3RoOiBudW1iZXI7XG4gICAgfSxcbiAgKTogdGhpcyB7XG4gICAgbm90SW1wbGVtZW50ZWQoXCJjcnlwdG8uRGVjaXBoZXJpdi5wcm90b3R5cGUuc2V0QUFEXCIpO1xuICB9XG5cbiAgc2V0QXV0aFRhZyhfYnVmZmVyOiBCaW5hcnlMaWtlLCBfZW5jb2Rpbmc/OiBzdHJpbmcpOiB0aGlzIHtcbiAgICBub3RJbXBsZW1lbnRlZChcImNyeXB0by5EZWNpcGhlcml2LnByb3RvdHlwZS5zZXRBdXRoVGFnXCIpO1xuICB9XG5cbiAgc2V0QXV0b1BhZGRpbmcoX2F1dG9QYWRkaW5nPzogYm9vbGVhbik6IHRoaXMge1xuICAgIG5vdEltcGxlbWVudGVkKFwiY3J5cHRvLkRlY2lwaGVyaXYucHJvdG90eXBlLnNldEF1dG9QYWRkaW5nXCIpO1xuICB9XG5cbiAgdXBkYXRlKGRhdGE6IEJpbmFyeUxpa2UpOiBCdWZmZXI7XG4gIHVwZGF0ZShkYXRhOiBzdHJpbmcsIGlucHV0RW5jb2Rpbmc6IEVuY29kaW5nKTogQnVmZmVyO1xuICB1cGRhdGUoXG4gICAgZGF0YTogQXJyYXlCdWZmZXJWaWV3LFxuICAgIGlucHV0RW5jb2Rpbmc6IHVuZGVmaW5lZCxcbiAgICBvdXRwdXRFbmNvZGluZzogRW5jb2RpbmcsXG4gICk6IHN0cmluZztcbiAgdXBkYXRlKFxuICAgIGRhdGE6IHN0cmluZyxcbiAgICBpbnB1dEVuY29kaW5nOiBFbmNvZGluZyB8IHVuZGVmaW5lZCxcbiAgICBvdXRwdXRFbmNvZGluZzogRW5jb2RpbmcsXG4gICk6IHN0cmluZztcbiAgdXBkYXRlKFxuICAgIF9kYXRhOiBzdHJpbmcgfCBCaW5hcnlMaWtlIHwgQXJyYXlCdWZmZXJWaWV3LFxuICAgIF9pbnB1dEVuY29kaW5nPzogRW5jb2RpbmcsXG4gICAgX291dHB1dEVuY29kaW5nPzogRW5jb2RpbmcsXG4gICk6IEJ1ZmZlciB8IHN0cmluZyB7XG4gICAgbm90SW1wbGVtZW50ZWQoXCJjcnlwdG8uRGVjaXBoZXJpdi5wcm90b3R5cGUudXBkYXRlXCIpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDaXBoZXJJbmZvKFxuICBuYW1lT3JOaWQ6IHN0cmluZyB8IG51bWJlcixcbiAgb3B0aW9ucz86IHsga2V5TGVuZ3RoPzogbnVtYmVyOyBpdkxlbmd0aD86IG51bWJlciB9LFxuKSB7XG4gIGlmICh0eXBlb2YgbmFtZU9yTmlkICE9PSBcInN0cmluZ1wiICYmIHR5cGVvZiBuYW1lT3JOaWQgIT09IFwibnVtYmVyXCIpIHtcbiAgICB0aHJvdyBuZXcgRVJSX0lOVkFMSURfQVJHX1RZUEUoXG4gICAgICBcIm5hbWVPck5pZFwiLFxuICAgICAgW1wic3RyaW5nXCIsIFwibnVtYmVyXCJdLFxuICAgICAgbmFtZU9yTmlkLFxuICAgICk7XG4gIH1cblxuICBpZiAodHlwZW9mIG5hbWVPck5pZCA9PT0gXCJudW1iZXJcIikge1xuICAgIHZhbGlkYXRlSW50MzIobmFtZU9yTmlkLCBcIm5hbWVPck5pZFwiKTtcbiAgfVxuXG4gIGxldCBrZXlMZW5ndGgsIGl2TGVuZ3RoO1xuXG4gIGlmIChvcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YWxpZGF0ZU9iamVjdChvcHRpb25zLCBcIm9wdGlvbnNcIik7XG5cbiAgICAoeyBrZXlMZW5ndGgsIGl2TGVuZ3RoIH0gPSBvcHRpb25zKTtcblxuICAgIGlmIChrZXlMZW5ndGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFsaWRhdGVJbnQzMihrZXlMZW5ndGgsIFwib3B0aW9ucy5rZXlMZW5ndGhcIik7XG4gICAgfVxuXG4gICAgaWYgKGl2TGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhbGlkYXRlSW50MzIoaXZMZW5ndGgsIFwib3B0aW9ucy5pdkxlbmd0aFwiKTtcbiAgICB9XG4gIH1cblxuICBub3RJbXBsZW1lbnRlZChcImNyeXB0by5nZXRDaXBoZXJJbmZvXCIpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHByaXZhdGVEZWNyeXB0LFxuICBwcml2YXRlRW5jcnlwdCxcbiAgcHVibGljRGVjcnlwdCxcbiAgcHVibGljRW5jcnlwdCxcbiAgQ2lwaGVyaXYsXG4gIERlY2lwaGVyaXYsXG4gIGdldENpcGhlckluZm8sXG59O1xuIl19